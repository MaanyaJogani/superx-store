{% extends 'main.html' %}
{% block content %}
<head>

</head>
<body>

<div class="container">
  <h2>Tasks</h2>
  {% if current_task == '' %}
  <div class="panel panel-default" style="border-radius:0px;">
    <div class="panel-body" id="current_task">
        <div class="row">
        <div class="col-sm-1 col-md-1 col-lg-1" style="padding-top:11px;">
        {% if current_task['icon'] == None %}
            <img src="/static/icons/default.png" class="icon pull-right">
        {% else %}
        {% set app_list = current_task['icon'].split('/') %}
        {% set app_path = current_task['icon'].split(app_list[app_list|length - 1]) %}
            <img src="{{ url_for('display_file', filepath=app_path[0], filename=app_list[app_list|length - 1]) }}" class="icon" height="50px" width="50px">
        {% endif %}
        </div>
        <div class="col-sm-2 col-md-2 col-lg-2" style="padding-left:0; padding-top:11px;">
            <label style="color:#4d4d4d;">{{ current_task['name'] }}</label>
        </div>
        <div class="col-sm-9 col-md-9 col-lg-9" style="padding-left:0;">
            <label style="color:#4d4d4d;">{{ current_task['summery'] }}</label><br>
        </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-12" style="padding-top: 19px;">
        <div class="progress" style="margin-bottom: -6px;height: 9px;border-radius: 3px;">
            <div class="progress-bar progress-bar-success active" id="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:99%">
            </div>
        </div>
            <span class="progress_percent" style="padding-left: 24.5%; margin-bottom: 4px;">0%</span>
    </div>
  </div>
  </div>
  {% endif %}
  {% for task in tasks %}
  <div class="panel panel-default" style="border-radius:0px;">
    <div class="panel-body">
        <div class="row">
        <div class="col-sm-1 col-md-1 col-lg-1">
        {% if task['details']['icon'] == None %}
            <img src="/static/icons/default.png" class="icon pull-right">
        {% else %}
        {% set app_list = task['details']['icon'].split('/') %}
        {% set app_path = task['details']['icon'].split(app_list[app_list|length - 1]) %}
            <img src="{{ url_for('display_file', filepath=app_path[0], filename=app_list[app_list|length - 1]) }}" class="icon" height="50px" width="50px">
        {% endif %}
        </div>
        <div class="col-sm-1 col-md-1 col-lg-1" style="padding-left:0;">
            <label style="color:#4d4d4d;margin-bottom:-9px">{{ task['details']['name'] }}</label><br>

        </div>
        <div class="col-sm-10 col-md-10 col-lg-10" style="padding-top: 19px;">
            <div class="progress" style="margin-bottom: -6px;height: 9px;border-radius: 3px;">
            <div class="progress-bar progress-bar-success active" id="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:99%">
            </div>
            </div>
        </div>
            <span class="progress_percent" style="padding-left: 24.5%; margin-bottom: 4px;">0%</span>
    </div>
  </div>
  </div>
  {% endfor %}
</div>
<script>
    function setProgress(x){
    var style="linear-gradient(90deg, #3baee950 "+x+"%, #0000ff00 0%)";
    $('#current_task').css(
    "background", style);
    }
    setInterval(function(){ 
        x = x+1
        setProgress(x)
    }, 1000);
</script>
{% endblock %}





{% extends 'main.html' %}
{% block content %}
<script>
$(document).ready(function(){
 $('#home').addClass('active');
});
</script>
<link href="static/styles/styleBorder.css" rel="stylesheet">
<!--<script>
alert = function(mesg) {console.trace(mesg)}
</script>-->
<style>
#see_more{
  margin-top:1px;
  margin-left: 14px;
  text-decoration:none;
}

#see_more:hover{
  color: #555;
}
</style>
<div id="main">
    <div class="container-fluid" style="border-top: 1px solid #ddd;">
        <div class="row" style="">
            <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9 col-xl-9 padding-0" style="background-image: url(/static/images/index/{{ image_list.0 }});
      background-size: 100% 100%;
    background-repeat: no-repeat; height: 100%; padding-top: 10%;">
            
            </div>
            <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-xl-3 padding-0" style="height: 100%;">
                <div>
                    <div align="center" style="background-image: url(/static/images/index/{{ image_list.1 }});
      background-size: 100% 99%;
    background-repeat: no-repeat; height: 50%;">
                        
                    </div>
                    <div align="center" style="background-image: url(/static/images/index/{{ image_list.2 }});
      background-size: 100% 99%;
    background-repeat: no-repeat; height: 50%; margin-top: 1%;">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>
        .padding-0{
            padding-right:0;
            padding-left: 3px;
        }

    </style>
    
<!--     to keep aspect ratio of boxes same -->
    <script>
        var aspect_ratio_box2 = 0.2


        var $box2 = jQuery(".container-fluid");


        jQuery(document).ready(function($) {
        $box2.height( $box2.width() * aspect_ratio_box2 );
        });


        jQuery(window).resize(function() {
        $box2.height( $box2.width() * aspect_ratio_box2 );
        });
    </script>
<!--     to keep aspect ratio of boxes same END-->

<div class="container" style="padding-top: 25px">
    <div class="row">
        <div class="col-sm-8 col-md-8 col-lg-8">
            <h3>  Top Apps </h3>
        </div>
        <div class="col-sm-4 col-md-4 col-lg-4 pull-right">
            <a href="#" id="see_more" class="pull-right"> <h3> See more </h3></a>
        </div>
    </div>
    <br>
    <div class="row">
    {% for top_app in top_app_list  %}
        <a href="/details?id={{ top_app['id'] }}" id="app-details-url" style="text-decoration:none; color: #666;">
        <div class="col-xm-3 col-sm-3 col-md-3 col-lg-3 col-xl-2 hover-box{{loop.index}}">
            <div class="topApp-color{{loop.index}} app-box">
            </div>
            <div class="app-icon" align="center">
                {% if top_app['icon'] == None %}
                    <img id="icon_topApps{{loop.index}}" src="/static/icons/default.png">
                {% else %}
                    {% set app_list = top_app['icon'].split('/') %}
                    {% set app_path = top_app['icon'].split(app_list[app_list|length - 1]) %}
                    <img id="icon_topApps{{loop.index}}" src="{{ url_for('display_file', filepath=app_path[0], filename=app_list[app_list|length - 1]) }}" height="60px" width="60px">
                {% endif %}
            </div>
            <div class="app-summery app-summery{{loop.index}}" align="center">
                {{top_app['name']|truncate(15)}}
                <br>
                {{top_app['summery']|truncate(18)}}
            </div>
            <div>
                {% if top_app['isInstalled'] == False %}
                    <a href="/install/?id={{top_app['id']}}&p_type=apt" id="btn-install" class="button btn{{loop.index}} btn btn-primary" style="">Install</a>
                {% else %}
                    <a href="/install/{{top_app['id']}}" id="btn-remove" class="button btn{{loop.index}} btn btn-success" style="">Open</a>
                {% endif %}
            </div>
            <script>
                img = document.querySelector("#icon_topApps{{loop.index}}");
                vibrant = new Vibrant(img);
                $('.topApp-color{{loop.index}}').css('background-color', vibrant.LightVibrantSwatch.getHex());
                
                $(".hover-box{{loop.index}}").hover(function(){
                    $(".btn{{loop.index}}").css({'top':'64%', 'opacity':'1' });
                    $(".app-summery{{loop.index}}").css({'top':'64%', 'opacity':'0' });
                    }, function(){
                    $(".btn{{loop.index}}").css({'top':'87%', 'opacity':'0' });
                    $(".app-summery{{loop.index}}").css({'top':'64%', 'opacity':'1' });
                });
            </script>
        </div>
        </a>
    {% endfor %}
    </div>
</div>
<br>
<br>
<div class="container">
    <div class="row">
        <div class="col-sm-8 col-md-8 col-lg-8">
            <h3>  Editor's Choice </h3>
        </div>
        <div class="col-sm-4 col-md-4 col-lg-4 pull-right">
            <a href="#" id="see_more" class="pull-right"> <h3> See more </h3></a>
        </div>
    </div>
    <br>
    <div class="row">
    {% for editor_app in editor_app_list  %}
    <a href="/details?id={{ editor_app['id'] }}" id="app-details-url" style="text-decoration:none; color: #666;">
        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 col-xl-2 editor-hover-box{{loop.index}}">
            <div class="app-color{{loop.index}} app-box">
            </div>
            <div class="app-icon" align="center">
                {% if editor_app['icon'] == None %}
                    <img id="icon" src="/static/icons/default.png">
                {% else %}
                    {% set app_list = editor_app['icon'].split('/') %}
                    {% set app_path = editor_app['icon'].split(app_list[app_list|length - 1]) %}
                    <img id="icon{{loop.index}}" src="{{ url_for('display_file', filepath=app_path[0], filename=app_list[app_list|length - 1]) }}" height="60px" width="60px" align="center">
                {% endif %}
                
                <br>
            </div>
            <div class="app-summery editor-app-summery{{loop.index}}" align="center">
                {{editor_app['name']|truncate(15)}}
                <br>
                {{editor_app['summery']|truncate(18)}}
            </div>
            <div>
                {% if editor_app['isInstalled'] == False %}
                    <a href="/install/?id={{editor_app['id']}}&p_type=apt" id="btn-install" class="button btn{{loop.index}} btn btn-primary" style="">Install</a>
                {% else %}
                    <a href="/install/{{editor_app['id']}}" id="btn-remove" class="button btn{{loop.index}} btn btn-success" style="">Open</a>
                {% endif %}
            </div>
        </div>
        <script>
            img = document.querySelector("#icon{{loop.index}}");
            vibrant = new Vibrant(img);
            $('.app-color{{loop.index}}').css('background-color', vibrant.LightVibrantSwatch.getHex());
            
            $(".editor-hover-box{{loop.index}}").hover(function(){
                    $(".editor-btn{{loop.index}}").css({'top':'64%', 'opacity':'1' });
                    $(".editor-app-summery{{loop.index}}").css({'top':'64%', 'opacity':'0' });
                    }, function(){
                    $(".editor-btn{{loop.index}}").css({'top':'87%', 'opacity':'0' });
                    $(".editor-app-summery{{loop.index}}").css({'top':'64%', 'opacity':'1' });
                });
        </script>
        <a href="/details?id={{ editor_app['id'] }}" style="text-decoration:none; color: #666;">
    {% endfor %}
    </div>
</div>
<br>
<br>
<style>
.slick-list .draggable{
  height: 500px;
}
</style>

<style>
.app-box{
box-shadow: 0px 2px 9px 3px rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
height: 137px;
padding: 15px;
margin: 0 auto;
border: 1px solid #6b6464e0;
-webkit-filter: opacity(65%); /* Safari 6.0 - 9.0 */
  filter: opacity(65%);
}

.app-icon{
position: absolute;
top: 12%;
display: block;
margin: 0 auto;
left: 0;
right: 0;
}

.app-summery{
width: 70%;
position: absolute;
top: 62%;
margin: 0 auto;
left: 0;
right: 0;
}

.button{
position: absolute;
top:80%;
opacity: 0;
margin: 0 auto;
left: 0;
right: 0;
}
@media (max-width: 1199px){
    .app-box{
        width: 100% !important;
    }
    }
    
@media (min-width: 1200px){
    .app-box{
        width: 87% !important;
    }
    }

</style>

{% endblock %}

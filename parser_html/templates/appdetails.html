{% extends 'main.html' %}
{% block content %}
<script>
document.onreadystatechange = function () {
  var state = document.readyState
  if (state == 'interactive') {
//        document.getElementById('contents').style.visibility="hidden";
  } else if (state == 'complete') {
      setTimeout(function(){
         document.getElementById('interactive');
         document.getElementById('load').style.visibility="hidden";
         document.getElementById('hidden').style.display="block";
         {% if data['thumbnails'] != None %}
            {% for screenshot in data['thumbnails'] %}
            load_image{{loop.index0}}();
            {% endfor %}
        {% endif %}
        {% if data['screenshots'] != None %}
            {% for screenshot in data['screenshots'] %}
            load_image{{loop.index0}}();
            {% endfor %}
        {% endif %}
      },1000);
  }
}
</script>
<style>
</style>
<link href='/static/styles/appDetails.css' rel='stylesheet' type='text/css'>
<div class="container-fluid fixed-top" style="background-color:#fff; box-shadow: inset 0px -1px 8px -10px #CCC, 3px -2px 8px 2px #CCC; border-top: 1px solid #ddd; position: fixed; z-index: 1000; width:100%; overflow-x: hidden; overflow-y: auto; height: 130px;">
  <div class="row" style="padding-top: 5px;">
    <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 col-xl-2">
        {% if data['icon'] == None %}
            <img src="/static/icons/default.png" class="icon pull-right">
        {% else %}
            {% set app_icon_list = data['icon'].split('/') %}
            {% set app_path = data['icon'].split(app_icon_list[app_icon_list|length - 1]) %}
            <img src="{{ url_for('display_file', filepath=app_path[0], filename=app_icon_list[app_icon_list|length - 1]) }}" class="icon pull-right" height="100px" width="100px">
        {% endif %}
    </div>
    <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 col-xl-5" style="padding-top: 1px;">
        <font size="6" style="color:#333">{{data['name']}}</font>
        <br>
        <font style="color:#333">{{data['summery']}}</font>
        <hr style="margin-top: 4px; margin-bottom: 4px;">
        {% set rating_round = rating|round %}
        <font size="5" style="color:#333"> {{rating}} </font>&nbsp;
        {% for i in range(5) %}
            {% if i < rating_round %}
                <span class="fa fa-star checked"></span>
            {% else %}
                <span class="fa fa-star"></span>
            {% endif %}
        {% endfor %}
        <br>
        <font size="2" style="color:#999; line-height: 6px;"> {{rating_comments}} Ratings </font>
    </div>
    <div class="col-xs-5 col-sm-5 col-md-3 col-lg-2 col-xl-2" style="padding-top: 34px;">
        {% if data['isInstalled'] == False %}
            <div class="row" style="padding-right: 47%;">
            <a href="/install/?id={{data['id']}}&p_type=apt" id="btn-install" class="btn btn-primary margin-7 pull-right" style="">Install</a>
            </div>
        {% else %}
            <div class="row" style="padding-right: 20%;">
                <a href="/remove/?id={{data['id']}}&p_type=apt" id="btn-open" class="btn btn-success margin-7 pull-right" style="">Open</a>
                <a href="/remove/?id={{data['id']}}&p_type=apt" id="btn-remove" class="btn btn-danger margin-7 pull-right" style="">Remove</a>
            </div>
        {% endif%}
    </div>
  </div>
  <style>
    .checked{
        color: #3daee9;
    }
    .margin-7{
        margin-right: 0px;
        margin-left: 7px;
        }
  </style>
</div>
<br>

<style>
#main-table{
    width:95%;
}
</style>
<div class="container" style="margin-top: 9%; display: none;">
  <h2>Task</h2>
  <div class="progress">
    <div class="progress-bar progress-bar-striped active" id="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:99%">
      40%
    </div>
  </div>
</div>
<table align="center" id="main-table">
    <tr>
        <td align="left" valign="top" style="border-right: 1px solid #ddd;">
            <div class="row">
            <div class="col-sm-12" id="app-description">
                <div id="description" style="margin-right: 38px;text-align:justify">
                {% set desc_len = description|length %}
                <font size="5" class="main-hearder-title">Description </font>
                    {{description|safe|truncate(500)}}
                    {% if desc_len >= 500 %}
                    <a data-toggle="collapse" data-target="#demo" onclick="myFunction()" style="text-decoration:none; cursor:pointer"> &nbsp;Show More</a>
                    {% endif %}
                </div>
                <div id="demo" class="collapse" style="margin-right: 38px; text-align:justify ">
                <font size="5" class="main-hearder-title">Description </font>
                    {{description|safe}}
                </div>
                <script>
                    function myFunction() {
                    var x = document.getElementById("description");
                    if (x.style.display === "none") {
                        x.style.display = "block";
                    } else {
                        x.style.display = "none";
                    }
                    }
                </script>
                </div>
                <style>
                    #app-description{
                        line-height: 30px;
                    }
                </style>
            </div>
            <hr>
            {% include 'appDetails_carousel.html' %}
            <br>
            <br>
            <hr>
            
            <font size="5" class="main-hearder-title">Rating & Reviews </font>
            <br>
            <font size="3" class="main-hearder-title"><i>No reviews done yet. </i></font>
            <a style="text-decoration:none;"> <font size="2" style="cursor:pointer"> Write your own reviews </font></a>
            <hr>
            
            <font size="5" class="main-hearder-title">More from this category</font>
            <br>
            <br>
            <div class="row" style="margin-right: 5px; padding-right: 29px;">
            {% include 'appBox.html' %}
            </div>
            <br>
            <br>
        </td>
        <style>
            .app-box{
            box-shadow: 0px 2px 9px 3px rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
            height: 137px;
            padding: 15px;
            margin: 0 auto;
            border: 1px solid #6b6464e0;
            -webkit-filter: opacity(65%); /* Safari 6.0 - 9.0 */
            filter: opacity(65%);
            }

            .app-icon{
            position: absolute;
            top: 12%;
            display: block;
            margin: 0 auto;
            left: 0;
            right: 0;
            }

            .app-summery{
            width: 70%;
            position: absolute;
            top: 62%;
            margin: 0 auto;
            left: 0;
            right: 0;
            }

            .button{
            position: absolute;
            top:80%;
            opacity: 0;
            margin: 0 auto;
            left: 0;
            right: 0;
            }
            @media (max-width: 1199px){
                .app-box{
                    width: 100% !important;
                }
                }
                
            @media (min-width: 1200px){
                .app-box{
                    width: 87% !important;
                }
                }
        </style>
        <td style="width:200px" valign="top">
            <ul class="list-group">
                <li class="list-group-item">
                    <font size="3" style="font-weight: bold; color:#888;">Information &nbsp;</font>  <a style="text-decoration:none; display: none"> <font size="1" style="cursor:pointer"> Update Info </font></a>
                </li>
            </ul>
            <ul class="list-group">
                    {% if data['license'] != None %}
                        <li class="list-group-item">
                        <font size="2" class="info-title"><span class="glyphicon glyphicon-list-alt"></span> License</font>
                        {% set license_length = data['license']|length %}
                        {% if license_length >= 20 %}
                            <font size="2" style="" id="license-description-small" class="info">{{data['license']|truncate(20)}} &nbsp;<a data-toggle="collapse" data-target="#license-description" onclick="myFunction_description()"><sub><i class="fa fa-angle-down" style="font-size:16px"></i></sub></a></font>
                            <font size="2" style="" id="license-description" class="info collapse">{{data['license']}} <a data-toggle="collapse" data-target="#license-description" onclick="myFunction_description()" style="text-decoration:none;"> &nbsp; &nbsp;<i class="fa fa-angle-up" style="font-size:16px"></i></a></font>
                            <script>
                            function myFunction_description() {
                            var x = document.getElementById("license-description-small");
                            if (x.style.display === "none") {
                                x.style.display = "block";
                            } else {
                                x.style.display = "none";
                            }
                            }
                            </script>
                            
                        {% else %}
                        <font size="2" style="" class="info">{{data['license']}}</font>
                        {% endif %}
                        </li>
                {% endif %}

                    {% if data['developer'] == None %}
                        {% if 'org.kde' in data['id'] %}
                            {% set developer = ['The KDE Community'] %}
                        {% elif 'org.gnome' in data['id'] %}
                            {% set developer = ['The GNOME Project'] %}
                        {% else %}
                            {% set developer = ['Unknown'] %}
                        {% endif %}
                    {% else %}
                    {% set developer = data['developer'].split('<') %}
                    {% endif %}
                    
                    {% if developer[0] != 'Unknown' %}
                        <li class="list-group-item">
                            <font size="2" class="info-title"><span class="glyphicon glyphicon-user"></span> Developer</font>
                        {% set developer_length = developer[0]|length %}
                        {% if developer_length >= 11 %}
                            <font size="2" style="" id="developer-description-small" class="info">{{developer[0]|truncate(11)}} &nbsp;<a data-toggle="collapse" data-target="#developer-description" onclick="myFunction_developer_description()"><sub><i class="fa fa-angle-down" style="font-size:16px"></i></sub></a></font>
                            <font size="2" style="" id="developer-description" class="info collapse">{{developer[0]}} <a data-toggle="collapse" data-target="#developer-description" onclick="myFunction_developer_description()" style="text-decoration:none;"> &nbsp; &nbsp;<i class="fa fa-angle-up" style="font-size:16px"></i></a></font>
                            <script>
                            function myFunction_developer_description() {
                            var x = document.getElementById("developer-description-small");
                            if (x.style.display === "none") {
                                x.style.display = "";
                            } else {
                                x.style.display = "none";
                            }
                            }
                            </script>
                        {% else %}
                            <font size="2" style="" class="info">{{developer[0]}}</font>
                        {% endif %}
                    {% endif %}
                </li>
                {% if data['homepage'] != None %}
                <li class="list-group-item">
                    <font size="2" class="info-title"><span class="glyphicon glyphicon-home"></span> Homepage</font>
                    {% set category_length = data['homepage']|length %}
                    {% if category_length >= 11 %}
                            <font size="2" style="" id="homepage-description-small" class="info"> {{ data['homepage']|truncate(11) }}&nbsp;<a data-toggle="collapse" data-target="#homepage-description" onclick="myFunction_homepage_description()"><sub><i class="fa fa-angle-down" style="font-size:16px"></i></sub></a></font>
                            <font size="2" style="" id="homepage-description" class="info collapse">{{data['homepage']}} <a data-toggle="collapse" data-target="#homepage-description" onclick="myFunction_homepage_description()" style="text-decoration:none;"> &nbsp; &nbsp;<i class="fa fa-angle-up" style="font-size:16px"></i></a></font>
                        <script>
                        function myFunction_homepage_description() {
                        var x = document.getElementById("homepage-description-small");
                        if (x.style.display === "none") {
                            x.style.display = "";
                        } else {
                            x.style.display = "none";
                        }
                        }
                        </script>
                    {% else %}
                        <font size="2" style="" class="info">{{data['homepage']}}</font>
                    {% endif %}
                </li>
                {% endif %}
                
                {% if category[0] != None %}
                <li class="list-group-item">
                    <font size="2" class="info-title"><span class="glyphicon glyphicon-home"></span> Category</font>
                    {% set category_length = category[0]|length %}
                    {% if category_length >= 11 %}
                            <font size="2" style="" id="homepage-description-small" class="info"> {{ category[0]|truncate(11) }}&nbsp;<a data-toggle="collapse" data-target="#category-description" onclick="myFunction_category_description()"><sub><i class="fa fa-angle-down" style="font-size:16px"></i></sub></a></font>
                            <font size="2" style="" id="category-description" class="info collapse">{{category[0]}} <a data-toggle="collapse" data-target="#category-description" onclick="myFunction_category_description()" style="text-decoration:none;"> &nbsp; &nbsp;<i class="fa fa-angle-up" style="font-size:16px"></i></a></font>
                        <script>
                        function myFunction_category_description() {
                        var x = document.getElementById("category-description-small");
                        if (x.style.display === "none") {
                            x.style.display = "";
                        } else {
                            x.style.display = "none";
                        }
                        }
                        </script>
                    {% else %}
                        <font size="2" style="" class="info">{{category[0]}}</font>
                    {% endif %}
                </li>
                {% endif %}
            </ul>
            {% if addons|length %}
            <ul class="list-group">
                <li class="list-group-item">
                    <font size="3" style="font-weight: bold;">Extensions</font>
                </li>
            </ul>
            <ul class="list-group">
                {% for addon in addons %}
                <a href="/details?id={{ addon['id'] }}" style="text-decoration:none; color: #666;">
                <li class="list-group-item">
                    <table width="100%">
                        <tr>
                            <td width="35%" valign="top">
                                {% if addon['icon'] == None %}
                                <img src="/static/icons/default.png" width="50px" height="50px">
                                {% else %}
                                {% set addonIcon_list = addon['icon'].split('/') %}
                                {% set addonIcon_path = addon['icon'].split(addonIcon_list[addonIcon_list|length - 1]) %}
                                <img src="{{ url_for('display_file', filepath=addonIcon_path[0], filename=addonIcon_list[addonIcon_list|length - 1]) }}" width="50px" height="50px">
                                {% endif %}
                            </td>
                            <td>
                                <font size="2" style="font-weight: bold;">{{ addon['name'] }}</font>
                                </br>
                                <font size="1">{{ addon['summery'] }}</font>
                            </td>
                        </tr>
                    </table>
                </li>
                </a>
                {% endfor %}
            </ul>
            {% endif %}
        </td>
    <tr>
</table>


<!-- Modal -->
<div class="modal right fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body" style="width: 100%;"  align="center">
                <button type="button" class="close pull-left" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <img id="moda_img" src="/static/images/noScreenShot.jpg" width="90%" align="center" style="padding-top: 10%">
            </div>
        </div><!-- modal-content -->
    </div><!-- modal-dialog -->
</div>

<!--     to keep aspect ratio of boxes same -->
    <script>
        var aspect_ratio_box2 = .5625;


        var $box2 = jQuery("#moda_img");

        consol.log($box2.width());
        jQuery(document).ready(function($) {
        $box2.height( $box2.width() * aspect_ratio_box2 );
        });


        jQuery(window).resize(function() {
        $box2.height( $box2.width() * aspect_ratio_box2 );
        });
    </script>
<!--     to keep aspect ratio of boxes same END-->

<script>
$('#myModal2').click(function(){
   $('#myModal2').modal('hide');
});
</script>
<!-- modal -->

<link href="/static/styles/multip-Cousel.css" rel="stylesheet" type="text/css" media="all" />
<script type="text/javascript" src="/static/js/multip-Cousel.js"></script>

{% endblock %}
